<app-nav username="admin" />
<div class="dashboard-container">
  <div class="dashboard-content">
    <!-- Pending Destination Suggestions -->
    <section class="dashboard-section">
      <div class="section-header">
        <h2>ğŸ“‹ Pending Destination Suggestions</h2>
        <p>Review and approve destination suggestions from users</p>
      </div>

      <app-destination-table type="pending" />
    </section>

    <!-- All unapproved Destinations -->
    <section class="dashboard-section">
      <div class="section-header">
        <h2>âœ… UnApproved Destinations</h2>
        <p>Manage un approved destinations</p>
      </div>

      @if (unApprovedDestinations().length > 0) {
        <div class="unapproved-container">
          <div class="unapproved-list">
            @for (destination of paginatedDestinations(); track trackByFn($index, destination)) {
              <div class="unapproved-item">
                <div class="item-flag">
                  <img [src]="destination.flagUrl" [alt]="'Flag of ' + destination.country" />
                </div>
                <div class="item-info">
                  <h4 class="item-title">{{ destination.country }}</h4>
                  <div class="item-details">
                    <span class="detail">ğŸ“ {{ destination.capital }}</span>
                    <span class="detail">ğŸŒ {{ destination.region }}</span>
                    <span class="detail">ğŸ‘¥ {{ destination.population | number }}</span>
                    <span class="detail">ğŸ’± {{ destination.currency }}</span>
                  </div>
                </div>
                <label class="approve-checkbox">
                  <input
                    type="checkbox"
                    [checked]="isSelectedForApproval(destination)"
                    (change)="toggleSelectForApproval(destination)"
                    class="checkbox-input"
                  />
                  <span class="checkbox-icon">
                    {{ isSelectedForApproval(destination) ? 'âœ…' : 'â˜' }}
                  </span>
                </label>
              </div>
            }
          </div>

          <!-- Pagination -->
          <div class="pagination">
            <button
              class="pagination-btn"
              [disabled]="currentPage() === 1"
              (click)="goToPage(currentPage() - 1)"
            >
              â† Previous
            </button>

            <div class="pagination-info">
              <span>Page {{ currentPage() }} of {{ totalPages() }}</span>
            </div>

            <button
              class="pagination-btn"
              [disabled]="currentPage() === totalPages()"
              (click)="goToPage(currentPage() + 1)"
            >
              Next â†’
            </button>
          </div>

          @if (selectedForApproval().length > 0) {
            <div class="action-bar">
              <p class="selection-count">
                {{ selectedForApproval().length }} destination(s) selected
              </p>
              <button class="btn btn-success" (click)="approveSelected()">
                âœ“ Approve Selected
              </button>
            </div>
          }
        </div>
      } @else {
        <div class="no-destinations">
          <p>ğŸ‰ No unapproved destinations</p>
        </div>
      }
    </section>

    <section class="dashboard-section">
      <div class="section-header">
        <h2>âœ… Approved Destinations</h2>
        <p>Manage destinations visible to all users</p>
      </div>

      <app-destination-table type="approved" />
    </section>
  </div>
</div>
